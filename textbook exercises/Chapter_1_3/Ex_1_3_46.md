# 1.3.46

## Problem

Forbidden triple for stack generability. Prove that a permutation can be generated by a stack (as in the previous question) if and only if it has no forbidden triple (a, b, c) such that a < b < c with c first, a second, and b third (possibly with other intervening integers between c and a and between a and b).

## Solution

1. Insight

- Partial solution: Suppose that there is a forbidden triple (a, b, c). Item c is popped before a and b, but a and b are pushed before c. Thus, when c is pushed, both a and b are on the stack. Therefore, a cannot be popped before b.
- We cannot have a situation where we need to pop a smaller number (a) after having seen and possibly needing to pop a larger number (c) unless all numbers between a and c have been correctly placed (popped or not yet encountered).

2. Algorithmn

- Initialize a variable max to keep track of the maximum number seen so far in the permutation.
- Traverse the permutation. For each number:
  - Push numbers onto the stack if they are not the next expected number to recreate the permutation sequence.
  - Pop numbers from the stack if they match the next expected number in the sequence. Update max to the current number if it's greater than the current max.
  - If you encounter a number less than max and it's not the immediate next number to pop, the permutation cannot be generated due to the presence of a forbidden triple.

3. Example
Consider the permutation [2, 1, 3, 0]. Here's how the algorithm works step-by-step:

- 2 is encountered: It's the new max. Pushed onto the stack.
- 1 is encountered: It's less than max but expected next, so no issue. Not pushed since it matches the immediate expectation.
- 3 is encountered: New max. Previous max (2) popped. Push 3 since it doesn't immediately match the next expected number.
- 0 is encountered: It's less than max but is the next expected number, so the sequence is correct.
- No forbidden triples are detected, and the permutation is identified as generable by the algorithm.